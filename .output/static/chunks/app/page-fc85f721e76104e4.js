(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{604:(e,a,s)=>{Promise.resolve().then(s.bind(s,7172))},7172:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>N});var t=s(5155),c=s(2115),l=s(8186);let r=(0,s(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var n=s(1154),i=s(1007),o=s(3109),d=s(7924),x=s(9074),m=s(3727),h=s(2461),y=s(1621),j=s(8474),p=s(5961),u=s(1035);function N(){let{currentTheme:e}=(0,p.D)(),a=(0,u.Yx)(e),[s,N]=(0,c.useState)(null),[f,g]=(0,c.useState)([]),[b,v]=(0,c.useState)(!1),[w,P]=(0,c.useState)(!1),[S,k]=(0,c.useState)([]),[A,E]=(0,c.useState)(!1),[C,_]=(0,c.useState)(null),F=async e=>{v(!0),_(null);try{let a=await fetch("/api/players/".concat(e,"/history"));if(a.ok){let e=await a.json();console.log("Rating history data:",e);let s=Array.isArray(e)?e:e.ratings||[];g(s)}else throw Error("Failed to fetch rating history: ".concat(a.status))}catch(e){console.error("Error fetching rating history:",e),_("Failed to load rating history. Using sample data instead.")}finally{v(!1)}},R=async()=>{E(!0),_(null);try{let e=await fetch("/api/players/top?limit=10");if(e.ok){let a=await e.json();k(a.players||[]),P(!0)}else throw Error("Failed to fetch top players: ".concat(e.status))}catch(e){console.error("Error fetching top players:",e),_("Failed to load top players. Please try again.")}finally{E(!1)}},T=e=>{N(e),F(e.ECF_code)};return(0,t.jsx)("div",{className:"min-h-screen ".concat((0,u.pe)(e)),children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("div",{className:"flex justify-end mb-4",children:(0,t.jsx)(j.A,{})}),(0,t.jsx)("h1",{className:"text-5xl font-bold ".concat(a.textPrimary," mb-4"),children:"Chess Rating Dashboard"}),(0,t.jsx)("p",{className:"text-xl ".concat(a.textSecondary," mb-6"),children:"Track player ratings and performance over time"}),!s&&!w&&(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:(0,t.jsxs)("button",{onClick:R,className:"inline-flex items-center gap-2 ".concat(a.buttonPrimary," px-6 py-3 rounded-lg font-medium transition-colors"),children:[(0,t.jsx)(l.A,{className:"w-5 h-5"}),"View Top 10 Players"]})})]}),(0,t.jsx)("div",{className:"max-w-2xl mx-auto mb-12",children:(0,t.jsx)(m.A,{onPlayerSelect:T})}),w&&!s&&(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("div",{className:"flex justify-start mb-6",children:(0,t.jsxs)("button",{onClick:()=>{P(!1),k([]),_(null)},className:"inline-flex items-center gap-2 ".concat(a.buttonSecondary," px-4 py-2 rounded-lg font-medium transition-colors"),children:[(0,t.jsx)(r,{className:"w-4 h-4"}),"Back to Main"]})}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("h3",{className:"text-2xl font-bold ".concat(a.textPrimary," mb-6 text-center flex items-center justify-center gap-2"),children:[(0,t.jsx)(l.A,{className:"w-6 h-6"}),"Top 10 Players by Rating"]}),C&&(0,t.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4 mb-6",children:(0,t.jsx)("p",{className:"text-red-300 text-sm",children:C})}),A?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(n.A,{className:"w-8 h-8 animate-spin text-blue-400"}),(0,t.jsx)("span",{className:"ml-2 ".concat(a.textSecondary),children:"Loading top players..."})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:S.map(s=>(0,t.jsx)("button",{onClick:()=>T(s),className:"".concat(a.surface," rounded-xl p-4 ").concat(a.surfaceHover," transition-colors text-left relative"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 ".concat((0,u.k2)(e)," rounded-full flex items-center justify-center"),children:(0,t.jsx)(i.A,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"".concat(a.textPrimary," font-medium truncate"),children:s.full_name}),(0,t.jsxs)("div",{className:"".concat(a.textSecondary," text-sm"),children:["Rating: ",s.rating," â€¢ ",s.title]}),s.federation&&(0,t.jsx)("div",{className:"".concat(a.textSecondary," text-xs"),children:s.federation})]})]})},s.ECF_code))})]})]}),s&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsxs)("button",{onClick:()=>{N(null),g([]),_(null)},className:"inline-flex items-center gap-2 ".concat(a.buttonSecondary," px-4 py-2 rounded-lg font-medium transition-colors"),children:[(0,t.jsx)(r,{className:"w-4 h-4"}),"Back to ",w?"Top Players":"Search"]})}),(0,t.jsx)(h.A,{player:s,ratingHistory:f}),(0,t.jsxs)("div",{className:"".concat(a.card," p-8"),children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold ".concat(a.textPrimary," mb-6 flex items-center gap-2"),children:[(0,t.jsx)(o.A,{className:"w-6 h-6 ".concat(a.iconPrimary)}),"Rating History",b&&(0,t.jsx)(n.A,{className:"w-5 h-5 animate-spin"})]}),C&&(0,t.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4 mb-6",children:(0,t.jsx)("p",{className:"text-red-300 text-sm",children:C})}),b?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(n.A,{className:"w-8 h-8 animate-spin text-blue-400"}),(0,t.jsx)("span",{className:"ml-2 ".concat(a.textSecondary),children:"Loading rating history..."})]}):(0,t.jsx)(y.A,{data:f})]})]}),!s&&(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-8 mt-16",children:[(0,t.jsxs)("div",{className:"".concat(a.card," p-6 text-center"),children:[(0,t.jsx)(d.A,{className:"w-12 h-12 ".concat(a.iconPrimary," mx-auto mb-4")}),(0,t.jsx)("h3",{className:"text-xl font-semibold ".concat(a.textPrimary," mb-2"),children:"Search Players"}),(0,t.jsx)("p",{className:a.textSecondary,children:"Find any player by name using the ECF database"})]}),(0,t.jsxs)("div",{className:"".concat(a.card," p-6 text-center"),children:[(0,t.jsx)(l.A,{className:"w-12 h-12 ".concat(a.iconPrimary," mx-auto mb-4")}),(0,t.jsx)("h3",{className:"text-xl font-semibold ".concat(a.textPrimary," mb-2"),children:"Top Players"}),(0,t.jsx)("p",{className:a.textSecondary,children:"View the top 10 players by rating in England"})]}),(0,t.jsxs)("div",{className:"".concat(a.card," p-6 text-center"),children:[(0,t.jsx)(x.A,{className:"w-12 h-12 ".concat(a.iconPrimary," mx-auto mb-4")}),(0,t.jsx)("h3",{className:"text-xl font-semibold ".concat(a.textPrimary," mb-2"),children:"Rating Tracking"}),(0,t.jsx)("p",{className:a.textSecondary,children:"Monitor rating changes and performance trends"})]})]})]})})}}},e=>{e.O(0,[647,941,308,441,583,358],()=>e(e.s=604)),_N_E=e.O()}]);